(()=>{"use strict";var e={904:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FigmaProjectCodeProvider=void 0;const o=n(718),i=n(346),a=n(382),s=n(536),r=o.FigmaCoderUtil.getTab,d=o.FigmaCoderUtil.getNodeClassName,l=(e,t)=>{if(!e.reactData)return t||e.name;const{props:n,states:o}=e.reactData;return n.length?`{props.${n[0].name}}`:o.length?`{${o[0].name}}`:t||e.name};t.FigmaProjectCodeProvider=class{traverseSelectionNodeByDFS(e,t,n){var o;return!!e(t,n)||(null===(o=t.children)||void 0===o||o.find((n=>this.traverseSelectionNodeByDFS(e,n,t))),!1)}traverseNodeByDFS(e,t,n){var o;return!!e(t,n)||(null===(o=t.children)||void 0===o||o.find((n=>this.traverseNodeByDFS(e,n,t))),!1)}traverseByDFSGetCode(e,t,n){if(e.children&&1===e.children.length)return this.traverseByDFSGetCode(e.children[0],t,n);let i="",c="",u="";if(e.children){const t=new Map;e.similarData&&e.similarData.similarChildrenFirstIndexGroup.forEach(((i,a)=>{const s=e.children[i];if(s){const i=this.traverseByDFSGetCode(s,e,Object.assign(Object.assign({},n),{depth:n.depth+1}));c+=i.cssCode;const d=o.FigmaCoderUtil.getNodeComponentName(s);u+=`const ${d} = () => {\n              return (${i.htmlCode})\n            }\n`;const l=`${r(n.depth)}<${d} />\n`;e.similarData.similarChildrenGroup[a].similarChildrenIndexes.forEach((n=>{const o=e.children[n];t.set(o.id,l)}))}})),e.children.sort(((e,t)=>e.absoluteBoundingBox.y!==t.absoluteBoundingBox.y?e.absoluteBoundingBox.y-t.absoluteBoundingBox.y:e.absoluteBoundingBox.x-t.absoluteBoundingBox.x)).forEach((o=>{if(t.has(o.id)){const e=t.get(o.id);return void(i+=e)}const a=this.traverseByDFSGetCode(o,e,Object.assign(Object.assign({},n),{depth:n.depth+1}));c+=a.cssCode,i+=a.htmlCode,u+=a.extraCode}))}let p="",h="";switch(e.type){default:{const o=function(e,t,n){var o,i;const a=[];let s="",r="";if(0===(null===(o=e.children)||void 0===o?void 0:o.length))return{cssClassName:"",cssCode:""};if(s=0===n.depth?"Container":"Container_"+d(e),a.push(`width: ${e.absoluteBoundingBox.width}px;`),a.push(`height: ${e.absoluteBoundingBox.height}px;`),n.isAbsolteLayout)if(a.push("position: absolute;"),t){const n=e.absoluteBoundingBox.x-t.absoluteBoundingBox.x,o=t.absoluteBoundingBox.x+t.absoluteBoundingBox.width-e.absoluteBoundingBox.x-e.absoluteBoundingBox.width;n<o?a.push(`left: ${n}px;`):a.push(`right: ${o}px;`);const i=e.absoluteBoundingBox.y-t.absoluteBoundingBox.y,s=t.absoluteBoundingBox.y+t.absoluteBoundingBox.height-e.absoluteBoundingBox.y-e.absoluteBoundingBox.height;i<s?a.push(`top: ${i}px;`):a.push(`bottom: ${s}px;`)}else a.push("left: 0px;"),a.push("top: 0px;");return e.children&&(null===(i=e.children)||void 0===i?void 0:i.length)>=2&&a.push("display: flex;"),r+=`.${s}\n{${a.map((e=>`\t${e}`)).join("\n")}\n}\n`,{cssClassName:s,cssCode:r}}(e,t,{depth:n.depth,isAbsolteLayout:!1}),i=function(e,t,n,o,i){var r;let d="",c="",u="div",p="",h="",g="",m=!0,C=!1;switch(e.children&&e.children.length>0&&(m=!1,C=!0),o&&(h+=`className={styles.${o}}`),e.type){default:e.children&&0!==e.children.length||(g=l(e),m=!1);break;case s.Figma.NodeTypes.VECTOR:u=`Icon${e.name.replace(/[\s\(\)]/g,"")}`,p=`style={{ fontSize: ${Math.ceil(e.absoluteBoundingBox.width)} }}`;break;case s.Figma.NodeTypes.INSTANCE:(null===(r=e.inferedData)||void 0===r?void 0:r.isButton)&&(u="Button",m=!1,g=l(e))}const f=a.FigmaReactCoder.getElementEventCode(e,i);return d+=a.FigmaReactCoder.getReactHtmlPrevCode({depth:n,tag:u,useTab:!0,classNameCode:h,styleCode:p,selfCloseTag:m,contentCode:g,needBreakLine:C,eventCode:f}),m||(c+=a.FigmaReactCoder.getReactHtmlBackCode({depth:n,tag:u,useTab:!0,needBreakLine:C})),{htmlCodePrev:d,htmlCodeBack:c}}(e,0,n.depth,o.cssClassName,n.eventHandlerNameMap);p+=i.htmlCodePrev,h+=i.htmlCodeBack,c+=o.cssCode;break}case s.Figma.NodeTypes.FRAME:{const o=function(e,t,n){var o;const i=[];let a="",r="",l=!1;if(e.children&&(null===(o=e.children)||void 0===o?void 0:o.length)>=2&&(e.counterAxisAlignItems||e.primaryAxisAlignItems)&&(l=!0),a=0===n.depth?"Container":"Container_"+d(e),l||(i.push(`width: ${e.absoluteBoundingBox.width}px;`),i.push(`height: ${e.absoluteBoundingBox.height}px;`)),n.isAbsolteLayout)if(i.push("position: absolute;"),t){const n=e.absoluteBoundingBox.x-t.absoluteBoundingBox.x,o=t.absoluteBoundingBox.x+t.absoluteBoundingBox.width-e.absoluteBoundingBox.x-e.absoluteBoundingBox.width;n<o?i.push(`left: ${n}px;`):i.push(`right: ${o}px;`);const a=e.absoluteBoundingBox.y-t.absoluteBoundingBox.y,s=t.absoluteBoundingBox.y+t.absoluteBoundingBox.height-e.absoluteBoundingBox.y-e.absoluteBoundingBox.height;a<s?i.push(`top: ${a}px;`):i.push(`bottom: ${s}px;`)}else i.push("left: 0px;"),i.push("top: 0px;");if(l){switch(i.push("display: flex;"),e.layoutMode===s.Figma.LayoutMode.VERTICAL&&i.push("flex-direction: column;"),e.counterAxisAlignItems){default:break;case s.Figma.CounterAxisAlignItems.CENTER:i.push("align-items: center;")}switch(e.primaryAxisAlignItems){default:break;case s.Figma.PrimaryAxisAlignItems.CENTER:i.push("justify-content: center;");break;case s.Figma.PrimaryAxisAlignItems.SPACE_BETWEEN:i.push("justify-content: space-between;")}}if(e.backgroundColor&&i.push(`background-color: ${e.backgroundColor};`),e.paddingLeft&&i.push(`padding-left: ${e.paddingLeft};`),e.paddingRight&&i.push(`padding-right: ${e.paddingRight};`),e.rectangleCornerRadii){const t=e.rectangleCornerRadii;i.push(`border-radius: ${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px;`)}return r+=`.${a}\n{${i.map((e=>`\t${e}`)).join("\n")}\n}\n`,{cssClassName:a,cssCode:r}}(e,t,{depth:n.depth,isAbsolteLayout:!1}),i=function(e,t,n,o,i){var s,d;let l="",c="",u="";if(n&&(u+=`className={styles.${n}}`),null===(s=e.inferedData)||void 0===s?void 0:s.isInputCombine){let t="";(null===(d=e.inferedData)||void 0===d?void 0:d.isInputCombineHasIconChild)&&(t='prefix={<Icon type="icon" />'),l+=`${r(o)}<Input className={styles.${n}} ${t} />\n`}const p=a.FigmaReactCoder.getElementEventCode(e,i);return l+=a.FigmaReactCoder.getReactHtmlPrevCode({depth:o,tag:"div",useTab:!0,classNameCode:u,styleCode:"",selfCloseTag:!1,contentCode:"",needBreakLine:!0,eventCode:p}),c+=a.FigmaReactCoder.getReactHtmlBackCode({depth:o,tag:"div",useTab:!0,needBreakLine:!0}),{htmlCodePrev:l,htmlCodeBack:c}}(e,0,o.cssClassName,n.depth,n.eventHandlerNameMap);p+=i.htmlCodePrev,h+=i.htmlCodeBack,c+=o.cssCode;break}case s.Figma.NodeTypes.TEXT:{const o=function(e,t){let n=[],o="",i="",a="";const s=function(e){let t="";if(1===e.fills.length){const n=e.fills[0],o=e=>Math.round(255*e);t=`rgba(${o(n.color.r)}, ${o(n.color.g)}, ${o(n.color.b)}, ${n.opacity})`}return t}(e);if(a+=`${e.fontSize}${e.fontWeight}${s}`,t.has(a)){const e=t.get(a);o=e.className,n=e.codes}else e.fontWeight&&n.push(`font-weight: ${e.fontWeight};`),e.fontSize&&n.push(`font-size: ${e.fontSize}px;`),s&&n.push(`color: ${s};`),o="Text"+function(e){return 400!==e.fontWeight&&"normal"!==e.fontWeight?"Title":"Text"}(e),t.set(a,{className:o,codes:n});return i+=`.${o}{\n${n.map((e=>`\t${e}`)).join("\n")}\n}\n`,{cssClassName:o,cssCode:i}}(e,n.textStyleCodeMap),i=function(e,t,n,o,i){var s,d;let c="",u="span";if(null===(s=null==i?void 0:i.children)||void 0===s?void 0:s.length)u=2===(null===(d=null==i?void 0:i.children)||void 0===d?void 0:d.length)?"label":"span";else if(e.fontSize){const t=e.fontSize;u=t>=40?"h0":t<40&&t>=32?"h1":t<32&&t>=26?"h2":t<26&&t>=22?"h3":t<22&&t>=20?"h4":"p"}let p="";n&&(p=`className={styles.${n}}`);const h=a.FigmaReactCoder.getElementEventCode(e,o);return c+=`${r(t)}<${u}`,p&&(c+=` ${p}`),h&&(c+=` ${h}`),c+=`>${l(e,e.characters)}</${u}>\n`,{htmlCodePrev:c,htmlCodeBack:""}}(e,n.depth,o.cssClassName,n.eventHandlerNameMap,t);p+=i.htmlCodePrev,h+=i.htmlCodeBack,c+=o.cssCode;break}}return{extraCode:u,htmlCode:`${p}${i}${h}`,cssCode:c}}traverseCopySimilarSubTree(e,t){const n=t.find((e=>e.reactData)),o=t.find((e=>e.inferedData));n&&(e.reactData=n.reactData,n.reactData=void 0),o&&(e.inferedData=n.inferedData,o.inferedData=void 0),e.children.forEach(((e,n)=>{let o=[];t.forEach((e=>{o.push(e.children[n])})),this.traverseCopySimilarSubTree(e,o)}))}traverseSimilarSubTree(e){var t;let n="";if(e.children.length){let t=new Map;e.children.forEach(((e,o)=>{var i;const a=this.traverseSimilarSubTree(e),s=t.get(a)||[];(null===(i=e.children)||void 0===i?void 0:i.length)&&t.set(a,[...s,o]),n+=a})),t.forEach((t=>{if(t.length>1){if(!e.similarData){const n=t.map((t=>e.children[t]));this.traverseCopySimilarSubTree(n[0],n.slice(1)),e.similarData={similarChildrenFirstIndexGroup:[],similarChildrenGroup:[]}}e.similarData.similarChildrenFirstIndexGroup.push(t[0]),e.similarData.similarChildrenGroup.push({similarChildrenIndexes:t})}}))}return`${e.type}-${(null===(t=e.children)||void 0===t?void 0:t.length)||0}-${n}`}traverseInferNodeComponent(e){i.inferNodeComponent(e),e.children.length&&e.children.forEach((e=>{this.traverseInferNodeComponent(e)}))}getHandleEventsCode(e,t){let n="";return e.length&&e.forEach((e=>{const o=t.get(e.id)||"";n+=`const ${o} = useCallBack(() => {}, []);\n`})),n}getStatesCode(e){let t="";return e.length&&e.forEach((e=>{t+=`const [${e.name}, set${o.FigmaCoderUtil.upperFirst(e.name)}] = useState<any>();\n`})),t}getPropsCode(e){let t="";return e.length&&(t+="props: {",e.forEach((e=>{t+=`${e.name}: any;`})),t+="}"),t}getCode(e){const t=new Map;if(e.type===s.Figma.NodeTypes.CANVAS||e.type===s.Figma.NodeTypes.DOCUMENT)return;this.traverseSimilarSubTree(e),this.traverseInferNodeComponent(e);const n=[],i=[],a=[],r=new Map;this.traverseNodeByDFS((e=>{var t,o,s,d;return(null===(t=e.reactData)||void 0===t?void 0:t.props)&&n.push(...e.reactData.props),(null===(o=e.reactData)||void 0===o?void 0:o.states)&&i.push(...e.reactData.states),(null===(s=e.reactData)||void 0===s?void 0:s.events)&&(null===(d=e.reactData)||void 0===d||d.events.forEach((e=>{r.set(e.id,`handle${e.name.replace("on","")}${a.length}`)})),a.push(...e.reactData.events)),!1}),e);const d=this.traverseByDFSGetCode(e,void 0,{textStyleCodeMap:t,eventHandlerNameMap:r,depth:0});let l="";const c=n.length>0||i.length>0||a.length>0;return d.extraCode||c?(l+=d.extraCode,l+="\n",l+=`const ${o.FigmaCoderUtil.getNodeComponentName(e)} = (${this.getPropsCode(n)}) => {\n        ${this.getStatesCode(i)}\n        ${this.getHandleEventsCode(a,r)}\n        return (\n          ${d.htmlCode}\n        )\n      }`):l=d.htmlCode,{cssCode:d.cssCode,reactCode:l}}}},718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FigmaCoderUtil=void 0;class n{static upperFirst(e){return e.charAt(0).toUpperCase()+e.slice(1)}static getTab(e){return new Array(e).fill("\t").join("")}static getNodeClassName(e){return`${e.name.replace(/[:\s\/\-]/g,"_")}`}static getNodeComponentName(e){return`${n.upperFirst(e.name).replace(/[:\s\/\-]/g,"")}`}}t.FigmaCoderUtil=n},346:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inferNodeComponent=void 0;const o=n(536),i={isForm:["form"],isInputCombine:["input"],isButton:["button"]};function a(e,t,n){var o;return!!e(t,n)||(null===(o=t.children)||void 0===o||o.find((n=>a(e,n,t))),!1)}function s(e,t){let n=!1,i=0;return a((e=>void 0!==t&&i>t||(e.type===o.Figma.NodeTypes.VECTOR?(n=!0,!0):(i++,!1))),e),n}t.inferNodeComponent=function(e){if(e.type!==o.Figma.NodeTypes.INSTANCE)return;let t=!1,n=!1,a=!1,r=!1;e.inferedData||(e.inferedData={}),i.isForm.find((t=>e.name.includes(t)))&&(n=!0,t=!0),!t&&i.isInputCombine.find((t=>e.name.includes(t)))&&(a=!0),t||a||2!==e.children.length||e.children[1].type===o.Figma.NodeTypes.TEXT&&s(e.children[0],2)&&(a=!0,r=!0);let d=!1;!t&&i.isButton.find((t=>e.name.includes(t)))&&(d=!0),e.inferedData=Object.assign(Object.assign({},e.inferedData),{isForm:n,isInputCombine:a,isButton:d,isInputCombineHasIconChild:r})}},382:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FigmaReactCoder=void 0;const o=n(718);t.FigmaReactCoder=class{static getElementEventCode(e,t){let n="";return e.reactData&&e.reactData.events.forEach((e=>{n+=`${e.name}={${t.get(e.id)}} `})),n}static getReactHtmlPrevCode({depth:e,tag:t,useTab:n,classNameCode:i,styleCode:a,contentCode:s,selfCloseTag:r,needBreakLine:d,eventCode:l}){let c="";return n&&(c+=`${o.FigmaCoderUtil.getTab(e)}`),c+=`<${t}`,i&&(c+=` ${i}`),a&&(c+=` ${a}`),l&&(c+=` ${l}`),r&&(c+="/"),c+=">",d&&(c+="\n"),s&&(c+=`${s}`,d&&(c+="\n")),c}static getReactHtmlBackCode({needBreakLine:e,depth:t,tag:n,useTab:i}){let a="";return a+=`${e&&i?o.FigmaCoderUtil.getTab(t):""}</${n}>`,e&&(a+="\n"),a}}},871:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{d(o.next(e))}catch(e){a(e)}}function r(e){try{d(o.throw(e))}catch(e){a(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,r)}d((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(904),a=n(536),s=["absoluteBoundingBox","absoluteRenderBounds","backgrounds","bottomLeftRadius","bottomRightRadius","cornerRadius","counterAxisAlignItems","layoutMode","name","opacity","paddingBottom","paddingLeft","paddingRight","paddingTop","primaryAxisAlignItems","relativeTransform","rotation","topLeftRadius","topRightRadius","x","y","scaleFactor","characters","fontName","fontSize","fontWeight","letterSpacing","lineHeight","textDecoration","textAlignHorizontal","textAlignVertical","type","fills"],r=window.figma,d=new Set;let l,c;const u=new Map;function p({placeholder:e,onPressEnter:t,parentDiv:n}){const o=document.createElement("input");o.placeholder=e,o.style.position="absolute",o.style.left="0px",o.style.top="-40px",o.style.width="150px",o.onkeydown=e=>{"Enter"===e.key&&(t(o.value),n.removeChild(o))},n.appendChild(o),o.focus()}window.addEventListener("keydown",(e=>{d.add(e.key)})),window.addEventListener("keyup",(e=>{d.delete(e.key)})),window.addEventListener("mousedown",(e=>{c={x:e.pageX,y:e.pageY}})),window.addEventListener("mouseup",(e=>{c=void 0})),r.on("selectionchange",(()=>o(void 0,void 0,void 0,(function*(){if(l&&(document.body.removeChild(l),l=void 0),!(d.has("x")||d.has("X")||d.has("s")||d.has("S")||d.has("e")||d.has("E")))return;const e=r.currentPage.selection[0];if((d.has("E")||d.has("e"))&&e&&c)!function({left:e,top:t,nodeId:n}){const o=document.createElement("div");o.style.position="fixed",o.style.left=`${e}px`,o.style.top=`${t}px`,o.style.width="150px",o.style.background="#ffffff";const i=document.createElement("div");i.style.position="relative",o.appendChild(i);const s=document.createElement("p");s.innerText="1.绑定为props字段",s.onclick=()=>{p({parentDiv:i,placeholder:"请输入props名称",onPressEnter:e=>{if(e){const t=u.get(n)||{events:[],props:[],states:[]};t.props=[{name:e}],u.set(n,t)}}})},i.appendChild(s);const r=document.createElement("p");r.innerText="2.绑定state字段",r.onclick=()=>{p({parentDiv:i,placeholder:"请输入state名称",onPressEnter:e=>{if(e){const t=u.get(n)||{events:[],props:[],states:[]};t.states=[{name:e}],u.set(n,t)}}})},i.appendChild(r);const d=document.createElement("p");d.innerText="3.绑定一个事件",d.onclick=()=>{!function({onSelect:e,parentDiv:t}){const n=document.createElement("select");let o="";Object.values(a.ReactEvents).forEach((e=>{o+=`<option value="${e}">${e}</option>`})),n.innerHTML=o,n.style.position="absolute",n.style.left="0px",n.style.top="-40px",n.style.width="150px",n.onchange=()=>{e(n.value),t.removeChild(n)},t.appendChild(n)}({parentDiv:i,onSelect:e=>{if(e){const t=u.get(n)||{events:[],props:[],states:[]};t.events=[{name:e,id:`${n}${e}`}],u.set(n,t)}}})},i.appendChild(d),l=o,o.onclick=e=>{e.stopPropagation()},document.body.appendChild(o)}({left:c.x+10,top:c.y+10,nodeId:e.id});else if(e){const t=function e(t){const n=t.children||[],o=Object.assign(Object.assign({},t),{children:n.map((t=>e(t)))});s.forEach((e=>{void 0!==t[e]&&(o[e]=t[e])}));const i=u.get(o.id);return i&&(o.reactData=i),o}(e);console.log(e,"origin selection"),console.log(t,"node");const n=(new i.FigmaProjectCodeProvider).getCode(t);(d.has("X")||d.has("x"))&&navigator.clipboard.writeText(`${n.reactCode}`).then((()=>{r.notify("已复制ReactCode")})),(d.has("S")||d.has("s"))&&navigator.clipboard.writeText(`${n.cssCode}`).then((()=>{r.notify("已复制CssCode")}))}})))),r.notify("已加载 Xkool Figma")},536:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Figma=t.ReactEvents=void 0,(n=t.ReactEvents||(t.ReactEvents={})).onClick="onClick",n.onKeyDown="onKeyDown",n.onKeyUp="onKeyUp",n.onMouseDown="onMouseDown",n.onMouseUp="onMouseUp",n.onMouseMove="onMouseUp",n.onMouseEnter="onMouseEnter",n.onMouseLeave="onMouseLeave",n.onTouchStart="onTouchStart",n.onTouchMove="onTouchMove",n.onTouchEnd="onTouchEnd",function(e){let t,n,o,i;!function(e){e.GROUP="GROUP",e.FRAME="FRAME",e.CANVAS="CANVAS",e.DOCUMENT="DOCUMENT",e.VECTOR="VECTOR",e.STAR="STAR",e.LINE="LINE",e.ELLIPSE="ELLIPSE",e.REGULAR_POLYGON="REGULAR_POLYGON",e.RECTANGLE="RECTANGLE",e.TEXT="TEXT",e.SLICE="SLICE",e.COMPONENT="COMPONENT",e.STICKY="STICKY",e.INSTANCE="INSTANCE",e.SHAPE_WITH_TEXT="SHAPE_WITH_TEXT",e.CONNECTOR="CONNECTOR"}(t=e.NodeTypes||(e.NodeTypes={})),function(e){e.MIN="MIN",e.CENTER="CENTER",e.MAX="MAX",e.BASELINE="BASELINE"}(n=e.CounterAxisAlignItems||(e.CounterAxisAlignItems={})),function(e){e.MIN="MIN",e.CENTER="CENTER",e.MAX="MAX",e.SPACE_BETWEEN="SPACE_BETWEEN"}(o=e.PrimaryAxisAlignItems||(e.PrimaryAxisAlignItems={})),function(e){e.NONE="NONE",e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL"}(i=e.LayoutMode||(e.LayoutMode={}))}(t.Figma||(t.Figma={}))}},t={};!function n(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,n),a.exports}(871)})();