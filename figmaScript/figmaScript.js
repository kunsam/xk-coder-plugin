(()=>{"use strict";var e={904:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FigmaProjectCodeProvider=void 0;const n=o(718),i=o(346),s=o(382),a=o(536),d=n.FigmaCoderUtil.getTab,r=n.FigmaCoderUtil.getNodeClassName;t.FigmaProjectCodeProvider=class{traverseSelectionNodeByDFS(e,t,o){var n;return!!e(t,o)||(null===(n=t.children)||void 0===n||n.find((o=>this.traverseSelectionNodeByDFS(e,o,t))),!1)}traverseNodeByDFS(e,t,o){var n;return!!e(t,o)||(null===(n=t.children)||void 0===n||n.find((o=>this.traverseNodeByDFS(e,o,t))),!1)}traverseByDFSGetCode(e,t,{depth:o,textStyleCodeMap:i}){if(e.children&&1===e.children.length)return this.traverseByDFSGetCode(e.children[0],t,{textStyleCodeMap:i,depth:o});let l="",u="",c="";if(e.children){const t=new Map;e.similarData&&e.similarData.similarChildrenFirstIndexGroup.forEach(((s,a)=>{const r=e.children[s];if(r){const s=this.traverseByDFSGetCode(r,e,{textStyleCodeMap:i,depth:o+1});u+=s.cssCode;const l=n.FigmaCoderUtil.getNodeComponentName(r);c+=`const ${l} = () => {\n              return (${s.htmlCode})\n            }`;const h=`${d(o)}<${l} />\n`;e.similarData.similarChildrenGroup[a].similarChildrenIndexes.forEach((o=>{const n=e.children[o];t.set(n.id,h)}))}})),e.children.sort(((e,t)=>e.absoluteBoundingBox.y!==t.absoluteBoundingBox.y?e.absoluteBoundingBox.y-t.absoluteBoundingBox.y:e.absoluteBoundingBox.x-t.absoluteBoundingBox.x)).forEach((n=>{if(t.has(n.id)){const e=t.get(n.id);return void(l+=e)}const s=this.traverseByDFSGetCode(n,e,{textStyleCodeMap:i,depth:o+1});u+=s.cssCode,l+=s.htmlCode}))}let h="",g="";switch(e.type){default:{const n=function(e,t,o){var n,i;const s=[];let a="",d="";if(0===(null===(n=e.children)||void 0===n?void 0:n.length))return{cssClassName:"",cssCode:""};if(a=0===o.depth?"Container":"Container_"+r(e),s.push(`width: ${e.absoluteBoundingBox.width}px;`),s.push(`height: ${e.absoluteBoundingBox.height}px;`),o.isAbsolteLayout)if(s.push("position: absolute;"),t){const o=e.absoluteBoundingBox.x-t.absoluteBoundingBox.x,n=t.absoluteBoundingBox.x+t.absoluteBoundingBox.width-e.absoluteBoundingBox.x-e.absoluteBoundingBox.width;o<n?s.push(`left: ${o}px;`):s.push(`right: ${n}px;`);const i=e.absoluteBoundingBox.y-t.absoluteBoundingBox.y,a=t.absoluteBoundingBox.y+t.absoluteBoundingBox.height-e.absoluteBoundingBox.y-e.absoluteBoundingBox.height;i<a?s.push(`top: ${i}px;`):s.push(`bottom: ${a}px;`)}else s.push("left: 0px;"),s.push("top: 0px;");return e.children&&(null===(i=e.children)||void 0===i?void 0:i.length)>=2&&s.push("display: flex;"),d+=`${a}{${s.map((e=>`\t${e}`)).join("\n")}}`,{cssClassName:a,cssCode:d}}(e,t,{depth:o,isAbsolteLayout:!1}),i=function(e,t,o,n){var i;let d="",r="",l="div",u="",c="",h="",g=!0,p=!1;switch(e.children&&e.children.length>0&&(g=!1,p=!0),n&&(c+=`className={styles.${n}}`),e.type){default:e.children&&0!==e.children.length||(h=e.name,g=!1);break;case a.Figma.NodeTypes.VECTOR:l="Icon",u=`style={{ fontSize: ${Math.ceil(e.absoluteBoundingBox.width)} }}`;break;case a.Figma.NodeTypes.INSTANCE:(null===(i=e.inferedData)||void 0===i?void 0:i.isButton)&&(l="Button",g=!1,h=e.name)}return d+=s.FigmaReactCoder.getReactHtmlPrevCode({depth:o,tag:l,useTab:!0,classNameCode:c,styleCode:u,selfCloseTag:g,contentCode:h,needBreakLine:p}),g||(r+=s.FigmaReactCoder.getReactHtmlBackCode({depth:o,tag:l,useTab:!0,needBreakLine:p})),{htmlCodePrev:d,htmlCodeBack:r}}(e,0,o,n.cssClassName);h+=i.htmlCodePrev,g+=i.htmlCodeBack,u+=n.cssCode;break}case a.Figma.NodeTypes.FRAME:{const n=function(e,t,o){var n;const i=[];let s="",d="",l=!1;if(e.children&&(null===(n=e.children)||void 0===n?void 0:n.length)>=2&&(e.counterAxisAlignItems||e.primaryAxisAlignItems)&&(l=!0),s=0===o.depth?"Container":"Container_"+r(e),l||(i.push(`width: ${e.absoluteBoundingBox.width}px;`),i.push(`height: ${e.absoluteBoundingBox.height}px;`)),o.isAbsolteLayout)if(i.push("position: absolute;"),t){const o=e.absoluteBoundingBox.x-t.absoluteBoundingBox.x,n=t.absoluteBoundingBox.x+t.absoluteBoundingBox.width-e.absoluteBoundingBox.x-e.absoluteBoundingBox.width;o<n?i.push(`left: ${o}px;`):i.push(`right: ${n}px;`);const s=e.absoluteBoundingBox.y-t.absoluteBoundingBox.y,a=t.absoluteBoundingBox.y+t.absoluteBoundingBox.height-e.absoluteBoundingBox.y-e.absoluteBoundingBox.height;s<a?i.push(`top: ${s}px;`):i.push(`bottom: ${a}px;`)}else i.push("left: 0px;"),i.push("top: 0px;");if(l){switch(i.push("display: flex;"),e.layoutMode===a.Figma.LayoutMode.VERTICAL&&i.push("flex-direction: column;"),e.counterAxisAlignItems){default:break;case a.Figma.CounterAxisAlignItems.CENTER:i.push("align-items: center;")}switch(e.primaryAxisAlignItems){default:break;case a.Figma.PrimaryAxisAlignItems.CENTER:i.push("justify-content: center;");break;case a.Figma.PrimaryAxisAlignItems.SPACE_BETWEEN:i.push("justify-content: space-between;")}}if(e.backgroundColor&&i.push(`background-color: ${e.backgroundColor};`),e.paddingLeft&&i.push(`padding-left: ${e.paddingLeft};`),e.paddingRight&&i.push(`padding-right: ${e.paddingRight};`),e.rectangleCornerRadii){const t=e.rectangleCornerRadii;i.push(`border-radius: ${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px;`)}return d+=`${s}{${i.map((e=>`\t${e}`)).join("\n")}}`,{cssClassName:s,cssCode:d}}(e,t,{depth:o,isAbsolteLayout:!1}),i=function(e,t,o,n){var i,a;let r="",l="",u="";if(o&&(u+=`className={styles.${o}}`),null===(i=e.inferedData)||void 0===i?void 0:i.isInputCombine){let t="";(null===(a=e.inferedData)||void 0===a?void 0:a.isInputCombineHasIconChild)&&(t='prefix={<Icon type="icon" />'),r+=`${d(n)}<Input className={styles.${o}} ${t} />\n`}return r+=s.FigmaReactCoder.getReactHtmlPrevCode({depth:n,tag:"div",useTab:!0,classNameCode:u,styleCode:"",selfCloseTag:!1,contentCode:"",needBreakLine:!0}),l+=s.FigmaReactCoder.getReactHtmlBackCode({depth:n,tag:"div",useTab:!0,needBreakLine:!0}),{htmlCodePrev:r,htmlCodeBack:l}}(e,0,n.cssClassName,o);h+=i.htmlCodePrev,g+=i.htmlCodeBack,u+=n.cssCode;break}case a.Figma.NodeTypes.TEXT:{const n=function(e,t){let o=[],n="",i="",s="";if(e.style)if(s+=`${e.style.fontSize}${e.style.fontWeight}${e.style.color}`,t.has(s)){const e=t.get(s);n=e.className,o=e.codes}else e.style.fontWeight&&o.push(`font-weight: ${e.style.fontWeight}`),e.style.fontSize&&o.push(`font-size: ${e.style.fontSize}px`),e.style.color&&o.push(`color: ${e.style.color}`),n=".Text"+r(e);return i+=`${n}{${o.map((e=>`\t${e}`)).join("\n")}}`,s&&t.set(s,{className:n,codes:o}),{cssClassName:n,cssCode:i}}(e,i),s=function(e,t,o,n){var i,s;let a="",r="span";if(null===(i=null==n?void 0:n.children)||void 0===i?void 0:i.length)r=2===(null===(s=null==n?void 0:n.children)||void 0===s?void 0:s.length)?"label":"span";else if(e.style.fontSize){const t=e.style.fontSize;r=t>=40?"h0":t<40&&t>=32?"h1":t<32&&t>=26?"h2":t<26&&t>=22?"h3":t<22&&t>=20?"h4":"p"}let l="";return o&&(l=`className={styles.${o}}`),a+=`${d(t)}<${r} ${l}>${e.characters}</${r}>\n`,{htmlCodePrev:a,htmlCodeBack:""}}(e,o,n.cssClassName,t);h+=s.htmlCodePrev,g+=s.htmlCodeBack,u+=n.cssCode;break}}return{extraCode:c,htmlCode:`${h}${l}${g}`,cssCode:u}}traverseSimilarSubTree(e){var t;let o="";if(e.children.length){let t=new Map;e.children.forEach(((e,n)=>{var i;const s=this.traverseSimilarSubTree(e),a=t.get(s)||[];(null===(i=e.children)||void 0===i?void 0:i.length)&&t.set(s,[...a,n]),o+=s})),t.forEach((t=>{t.length>1&&(e.similarData||(e.similarData={similarChildrenFirstIndexGroup:[],similarChildrenGroup:[]}),e.similarData.similarChildrenFirstIndexGroup.push(t[0]),e.similarData.similarChildrenGroup.push({similarChildrenIndexes:t}))}))}return`${e.type}-${(null===(t=e.children)||void 0===t?void 0:t.length)||0}-${o}`}traverseInferNodeComponent(e){i.inferNodeComponent(e),e.children.length&&e.children.forEach((e=>{this.traverseInferNodeComponent(e)}))}getCode(e){const t=new Map;if(e.type===a.Figma.NodeTypes.CANVAS||e.type===a.Figma.NodeTypes.DOCUMENT)return;this.traverseSimilarSubTree(e),this.traverseInferNodeComponent(e);const o=this.traverseByDFSGetCode(e,void 0,{textStyleCodeMap:t,depth:0});let i="";return o.extraCode?(i+=o.extraCode,i+="\n",i+=`const ${n.FigmaCoderUtil.getNodeComponentName(e)} = () => (${o.htmlCode})`):i=o.htmlCode,console.log(o.cssCode,"cssCode"),{cssCode:o.cssCode,reactCode:i}}}},718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FigmaCoderUtil=void 0,t.FigmaCoderUtil=class{static getTab(e){return new Array(e).fill("\t").join("")}static getNodeClassName(e){return`${e.name.replace(/[:\s\/\-]/g,"_")}`}static getNodeComponentName(e){return`${(t=e.name,t.charAt(0).toUpperCase()+t.slice(1)).replace(/[:\s\/\-]/g,"")}`;var t}}},346:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.inferNodeComponent=void 0;const n=o(536),i={isForm:["form"],isInputCombine:["input"],isButton:["button"]};function s(e,t,o){var n;return!!e(t,o)||(null===(n=t.children)||void 0===n||n.find((o=>s(e,o,t))),!1)}function a(e,t){let o=!1,i=0;return s((e=>void 0!==t&&i>t||(e.type===n.Figma.NodeTypes.VECTOR?(o=!0,!0):(i++,!1))),e),o}t.inferNodeComponent=function(e){if(e.type!==n.Figma.NodeTypes.INSTANCE)return;let t=!1,o=!1,s=!1,d=!1;e.inferedData||(e.inferedData={}),i.isForm.find((t=>e.name.includes(t)))&&(o=!0,t=!0),!t&&i.isInputCombine.find((t=>e.name.includes(t)))&&(s=!0),t||s||2!==e.children.length||e.children[1].type===n.Figma.NodeTypes.TEXT&&a(e.children[0],2)&&(s=!0,d=!0);let r=!1;!t&&i.isButton.find((t=>e.name.includes(t)))&&(r=!0),e.inferedData=Object.assign(Object.assign({},e.inferedData),{isForm:o,isInputCombine:s,isButton:r,isInputCombineHasIconChild:d})}},382:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FigmaReactCoder=void 0;const n=o(718);t.FigmaReactCoder=class{static getReactHtmlPrevCode({depth:e,tag:t,useTab:o,classNameCode:i,styleCode:s,contentCode:a,selfCloseTag:d,needBreakLine:r}){let l="";return o&&(l+=`${n.FigmaCoderUtil.getTab(e)}`),l+=`<${t}`,i&&(l+=` ${i}`),s&&(l+=` ${s}`),d&&(l+="/"),l+=">",r&&(l+="\n"),a&&(l+=`${a}`,r&&(l+="\n")),l}static getReactHtmlBackCode({needBreakLine:e,depth:t,tag:o,useTab:i}){let s="";return s+=`${e&&i?n.FigmaCoderUtil.getTab(t):""}</${o}>`,e&&(s+="\n"),s}}},536:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Figma=void 0,function(e){let t,o,n,i;!function(e){e.GROUP="GROUP",e.FRAME="FRAME",e.CANVAS="CANVAS",e.DOCUMENT="DOCUMENT",e.VECTOR="VECTOR",e.STAR="STAR",e.LINE="LINE",e.ELLIPSE="ELLIPSE",e.REGULAR_POLYGON="REGULAR_POLYGON",e.RECTANGLE="RECTANGLE",e.TEXT="TEXT",e.SLICE="SLICE",e.COMPONENT="COMPONENT",e.STICKY="STICKY",e.INSTANCE="INSTANCE",e.SHAPE_WITH_TEXT="SHAPE_WITH_TEXT",e.CONNECTOR="CONNECTOR"}(t=e.NodeTypes||(e.NodeTypes={})),function(e){e.MIN="MIN",e.CENTER="CENTER",e.MAX="MAX",e.BASELINE="BASELINE"}(o=e.CounterAxisAlignItems||(e.CounterAxisAlignItems={})),function(e){e.MIN="MIN",e.CENTER="CENTER",e.MAX="MAX",e.SPACE_BETWEEN="SPACE_BETWEEN"}(n=e.PrimaryAxisAlignItems||(e.PrimaryAxisAlignItems={})),function(e){e.NONE="NONE",e.HORIZONTAL="HORIZONTAL",e.VERTICAL="VERTICAL"}(i=e.LayoutMode||(e.LayoutMode={}))}(t.Figma||(t.Figma={}))}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}(()=>{const e=o(904),t=window.figma,n=new Set;window.addEventListener("keydown",(e=>{n.add(e.key)})),window.addEventListener("keyup",(e=>{n.delete(e.key)})),t.on("selectionchange",(()=>{if(!(n.has("Shift")||n.has("s")||n.has("S")))return;const o=["absoluteBoundingBox","absoluteRenderBounds","backgrounds","bottomLeftRadius","bottomRightRadius","cornerRadius","counterAxisAlignItems","layoutMode","name","opacity","paddingBottom","paddingLeft","paddingRight","paddingTop","primaryAxisAlignItems","relativeTransform","rotation","topLeftRadius","topRightRadius","x","y","scaleFactor","characters","fontName","fontSize","fontWeight","letterSpacing","lineHeight","textDecoration","textAlignHorizontal","textAlignVertical","type"],i=t.currentPage.selection[0];if(i){const s=function e(t){const n=t.children||[],i=Object.assign(Object.assign({},t),{children:n.map((t=>e(t)))});return o.forEach((e=>{void 0!==t[e]&&(i[e]=t[e])})),i}(i);console.log(s,"node");const a=(new e.FigmaProjectCodeProvider).getCode(s);n.has("Shift")&&navigator.clipboard.writeText(`${a.reactCode}`).then((()=>{t.notify("已复制ReactCode")})),(n.has("S")||n.has("s"))&&navigator.clipboard.writeText(`${a.cssCode}`).then((()=>{t.notify("已复制CssCode")}))}}))})()})();