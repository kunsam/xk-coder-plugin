(()=>{"use strict";(()=>{const t=window.figma,e=new Set;window.addEventListener("keydown",(t=>{e.add(t.key)})),window.addEventListener("keyup",(t=>{e.delete(t.key)})),t.on("selectionchange",(()=>{if(!(e.has("Shift")||e.has("s")||e.has("S")))return;const n=["absoluteBoundingBox","absoluteRenderBounds","backgrounds","bottomLeftRadius","bottomRightRadius","cornerRadius","counterAxisAlignItems","layoutMode","name","opacity","paddingBottom","paddingLeft","paddingRight","paddingTop","primaryAxisAlignItems","relativeTransform","rotation","topLeftRadius","topRightRadius","x","y","scaleFactor","characters","fontName","fontSize","fontWeight","letterSpacing","lineHeight","textDecoration","textAlignHorizontal","textAlignVertical","type"],i=t.currentPage.selection[0];if(i){const o=function t(e){const i=e.children||[],o=Object.assign(Object.assign({},e),{children:i.map((e=>t(e)))});return n.forEach((t=>{void 0!==e[t]&&(o[t]=e[t])})),o}(i);let a="";e.has("Shift")&&(a+="?reactCode=1"),(e.has("s")||e.has("S"))&&(a||(a+="?"),a+="cssCode=1"),fetch(`http://127.0.0.1:3779/handle${a}`,{method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}}).then((e=>{200===e.status?t.notify("处理成功"):t.notify("处理失败")}))}}))})()})();